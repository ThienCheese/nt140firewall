<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hướng dẫn Kết nối Firewall</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            margin: 0;
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        main {
            max-width: 800px;
            width: 100%;
            margin: 2rem 0;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        header {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 2rem;
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 2rem;
        }
        header p {
            margin: 0.5rem 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        .content {
            padding: 2rem;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 0.5rem;
            margin-top: 2rem;
        }
        .device-section {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin-top: 1.5rem;
        }
        .device {
            flex: 1;
            min-width: 250px;
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .device h3 {
            margin-top: 0;
            color: #34495e;
        }
        .qr-code {
            text-align: center;
            margin: 1rem 0;
        }
        .qr-code img {
            border: 5px solid #fff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        code, .hostname {
            background: #eee;
            padding: 3px 6px;
            border-radius: 4px;
            font-family: "Courier New", Courier, monospace;
            font-weight: bold;
            color: #c0392b;
            display: inline-block;
            word-break: break-all;
        }
        ol {
            padding-left: 1.5rem;
            line-height: 1.6;
        }
        summary {
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            padding: 0.5rem 0;
            color: #2980b9;
        }
        details {
            margin-top: 1rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 0 1rem;
        }
        details[open] {
            padding-bottom: 1rem;
        }
        .footer {
            text-align: center;
            padding: 1.5rem;
            font-size: 0.9rem;
            color: #777;
            background-color: #f9f9f9;
            border-top: 1px solid #eee;
        }
    </style>
</head>
<body>
    <main>
        <header>
            <h1>Trang Hướng dẫn Kết nối</h1>
            <p>Sử dụng các phương pháp bên dưới để kết nối thiết bị của bạn.</p>
        </header>

        <div class="content">
            <!-- Tên miền của bạn (để tham khảo) -->
            <p style="text-align: center;">Tên miền Firewall (Hostname): <span class="hostname">nt140firewall.duckdns.org</span></p>

            <h2>Thiết bị Di động (Nhanh nhất)</h2>
            <div class="device-section">
                <!-- Hướng dẫn cho iOS / macOS -->
                <div class="device">
                    <h3>iOS & macOS (iPhone / iPad / Mac)</h3>
                    <p>Quét mã QR bằng Camera của bạn để tải về cấu hình bảo mật (DoH).</p>
                    <div class="qr-code">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=https://nt140firewall.duckdns.org/clients/apple_ios_mac/DoH.mobileconfig" alt="QR Code for iOS/macOS">
                    </div>
                    <ol>
                        <li>Mở Camera và quét mã QR ở trên.</li>
                        <li>Nhấn vào thông báo "Đã tải về hồ sơ".</li>
                        <li>Vào <strong>Cài đặt (Settings)</strong> -> <strong>Đã tải về hồ sơ (Profile Downloaded)</strong>.</li>
                        <li>Nhấn <strong>Cài đặt (Install)</strong> ở góc trên bên phải.</li>
                    </ol>
                </div>

                <!-- Hướng dẫn cho Android -->
                <div class="device">
                    <h3>Android (9+)</h3>
                    <p>Quét mã QR để sao chép tên miền, sau đó dán vào cài đặt DNS.</p>
                    <div class="qr-code">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=nt140firewall.duckdns.org" alt="QR Code for Android">
                    </div>
                    <ol>
                        <li>Mở Camera và quét mã QR (hoặc dùng Google Lens).</li>
                        <li>Sao chép (Copy) đoạn text <code>nt140firewall.duckdns.org</code>.</li>
                        <li>Vào <strong>Cài đặt</strong> -> <strong>Kết nối</strong> -> <strong>DNS riêng tư (Private DNS)</strong>.</li>
                        <li>Chọn <strong>"Tên host của nhà cung cấp DNS riêng tư"</strong>.</li>
                        <li>Dán (Paste) tên miền đã sao chép vào và nhấn <strong>Lưu</strong>.</li>
                    </ol>
                </div>
            </div>

            <h2>Máy tính (Desktop)</h2>
            <p>Sử dụng các hướng dẫn bên dưới để cấu hình máy tính của bạn.</p>
            
            <!-- Hướng dẫn cho Windows -->
            <details>
                <summary>Windows (10 & 11)</summary>
                <p>Cách dễ nhất là cấu hình thủ công qua Cài đặt.</p>
                <ol>
                    <li>Mở <strong>Settings</strong> -> <strong>Network & Internet</strong>.</li>
                    <li>Nhấp vào <strong>Wi-Fi</strong> (hoặc <strong>Ethernet</strong>).</li>
                    <li>Nhấp vào <strong>Hardware properties</strong> (Thuộc tính phần cứng).</li>
                    <li>Tìm <strong>"DNS server assignment"</strong> (Gán máy chủ DNS) và nhấp <strong>Edit</strong>.</li>
                    <li>Chọn <strong>"Manual" (Thủ công)</strong>.</li>
                    <li>Bật <strong>IPv4</strong>.</li>
                    <li>Trong ô <strong>"Preferred DNS" (DNS Ưu tiên)</strong>, nhập IP máy chủ của bạn: <code>192.168.1.100</code></li>
                    <li>Nhấn <strong>Save</strong>.</li>
                </ol>
                <p><strong>Cách khác (Dùng script):</strong> Tải và chạy các script PowerShell này (Run as Administrator).</p>
                <ul>
                    <li><a href="https://nt140firewall.duckdns.org/clients/windows/connect.ps1" download>Kết nối DNS LAN</a> (Chỉ dùng tại nhà)</li>
                    <li><a href="https://nt140firewall.duckdns.org/clients/windows/connect_doh.ps1" download>Kết nối DoH</a> (Dùng cho laptop)</li>
                </ul>
            </details>

            <!-- Hướng dẫn cho Linux -->
            <details>
                <summary>Linux (Ubuntu/Fedora/GNOME)</summary>
                <p>Các script Linux không đáng tin cậy. Cách tốt nhất là cấu hình thủ công qua Giao diện (GUI).</p>
                <ol>
                    <li>Mở <strong>Settings (Cài đặt)</strong>.</li>
                    <li>Đi đến <strong>Network (Mạng)</strong> hoặc <strong>Wi-Fi</strong>.</li>
                    <li>Nhấp vào biểu tượng bánh răng (⚙️) bên cạnh kết nối của bạn.</li>
                    <li>Chuyển sang tab <strong>"IPv4"</strong>.</li>
                    <li>Tắt <strong>"Automatic" (Tự động)</strong> cho mục DNS.</li>
                    <li>Trong hộp thoại <strong>"DNS Servers" (Máy chủ DNS)</strong>, nhập IP máy chủ của bạn: <code>192.168.1.100</code></li>
                    <li>Tắt <strong>IPv6</strong> (để tránh rò rỉ DNS).</li>
                    <li>Nhấn <strong>Apply (Áp dụng)</strong>.</li>
                    <li>Tắt và Bật lại Wi-Fi/Mạng để thay đổi có hiệu lực.</li>
                </ol>
            </details>
        </div>

        <div class="footer">
            <p>Sau khi kết nối, bạn có thể truy cập Dashboard chính (yêu cầu đăng nhập) tại: <br><a href="https://nt140firewall.duckdns.org/">https://nt140firewall.duckdns.org/</a></p>
        </div>
    </main>
</body>
</html>